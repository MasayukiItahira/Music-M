# 楽曲管理アプリ 要件定義
作成日: 2025-12-19  
作成者: MasayukiItahira

## 背景・現状
現在の楽曲・アルバム管理における状況と問題点:
- 個人またはチームでの楽曲コレクション管理が散在している（Excel・スプレッドシート、ローカルフォルダなど）。
- 楽曲メタ（トラック順、作曲者、歌詞、音源 URL）とユーザーの「お気に入り」情報が一元管理されていない。
- 複数ユーザーで共有・同期すると重複や整合性の問題が発生しやすい。

## 課題（解決すべきこと）
- 楽曲・アルバム情報を DB 化し、CRUD 操作を安全かつ一貫性を持って行えるようにする。
- ユーザーごとの「お気に入り」状態を管理し、UI/ API で即時反映できるようにする。
- 将来的な音源ファイル保存や外部連携（例: S3、配信サービス）へ拡張しやすい設計にする。

## 機能要件
### 現行の業務フロー
```mermaid
flowchart TD
  subgraph PM
    P1[アルバム概要作成<br>・タイトル・トラック案・締切]
    P2[メンバーへ個別確認]
  end
  subgraph System
    Sys1[なし／手動管理]
  end
  subgraph Member
    M1[空き・素材提出可否を返信]
  end
  P1 --> P2
  P2 --> M1
  M1 --> P2
  P2 --> P3[候補日・進行を手動決定]
  P3 --> P4[手動で公開・アップロード]
  P4 --> End[公開完了]
```

### あるべき業務フロー
```mermaid
flowchart TD
  subgraph PM
    A1[アルバム概要入力<br>・タイトル/トラック案/参加者/締切/条件]
    A2[候補から1つ選択 or 承認]
  end

  subgraph System
    S1[メンバーの空き・ステータス取得<br>（カレンダー連携／手入力）]
    S2[素材提出状況／音源有無チェック]
    S3[候補日リスト作成（条件: 締切・素材揃い）]
    S4[メンバーへ通知：候補・依頼内容]
    S5[回答収集・ステータス更新]
    S6[未回答へ自動リマインド]
    S7[承認・素材揃いで公開予約／自動公開]
    S8[公開通知／メタ反映]
  end

  subgraph Member
    M1[通知受領・出欠／素材提出]
    M2[承認 or 差し戻し（レビュー）]
  end

  A1 --> S1
  S1 --> S2
  S2 --> S3
  S3 --> A2
  A2 --> S4
  S4 --> M1
  M1 --> S5
  S5 --> S6
  S5 --> S7
  S7 --> S8
  S8 --> PM[PMに公開完了通知]
  S8 --> Users[ユーザーへ公開通知 & お気に入り可能に]
```

